<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>Convex hull of a point set</title>
    <style type="text/css">
      body {
        text-shadow: -1px -1px 0 white, 1px -1px 0 white, -1px 1px 0 white, 1px 1px 0 white;
      }

      rect {
        fill: none;
        pointer-events: all;
      }

      .hull {
        fill: steelblue;
        stroke: steelblue;
        stroke-width: 32px;
        stroke-linejoin: round;
      }

      circle {
        fill: white;
        stroke: black;
        stroke-width: 1.5px;
      }
    </style>
  </head>
<body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
  <script type="text/javascript">
    var width = 960,
        height = 500;

    var randomX = d3.random.normal(width / 2, 60),
        randomY = d3.random.normal(height / 2, 60)
        vertices = d3.range(100).map(function() { return [randomX(), randomY()]; });

    var svg = d3.select("body").append("svg")
        .attr("width", width)
        .attr("height", height)
        .on("mousemove", function() { vertices[0] = d3.mouse(this); redraw(); })
        .on("click", function() { vertices.push(d3.mouse(this)); redraw(); });

    svg.append("rect")
        .attr("width", width)
        .attr("height", height);

    var hull = svg.append("path")
        .attr("class", "hull");

    var circle = svg.selectAll("circle");

    redraw();

    function redraw() {
      hull.datum(d3.geom.hull(vertices)).attr("d", function(d) { return "M" + d.join("L") + "Z"; });
      circle = circle.data(vertices);
      circle.enter().append("circle").attr("r", 3);
      circle.attr("transform", function(d) { return "translate(" + d + ")"; });
    }
  </script>
</body>
</hml>
